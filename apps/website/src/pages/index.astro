import Layout from '../layouts/Layout.astro';
import { getCommunityStats } from '../lib/api.js';

const stats = await getCommunityStats();

<Layout title="Ulti Project - FFXIV Endgame Community">
  <!-- Hero Section -->
  <section class="bg-gradient-to-r from-blue-900 to-purple-900 py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl md:text-6xl font-bold text-white mb-6">
        Welcome to <span class="text-blue-400">Ulti Project</span>!
      </h1>
      <p class="text-xl md:text-2xl text-gray-200 mb-8 max-w-4xl mx-auto">
        A FFXIV opportunity for NA players to progress thru <strong>ENDGAME CONTENT</strong> and achieve their 1st-time clears!
      </p>
      <div class="mb-8">
        <p class="text-lg text-blue-300 font-semibold">
          <strong>Current Content:</strong> {stats.currentContent}
        </p>
      </div>
      <a href="/signups" 
         class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-lg text-lg transition-colors">
        SIGN UP HERE
      </a>
      <div class="flex justify-center space-x-6 mt-8">
        <a href={stats.socialLinks.discord} target="_blank" rel="noopener noreferrer" 
           class="text-gray-300 hover:text-white">Discord</a>
        <a href={stats.socialLinks.twitter} class="text-gray-300 hover:text-white">Twitter</a>
        <a href={stats.socialLinks.twitch} class="text-gray-300 hover:text-white">Twitch</a>
        <a href={stats.socialLinks.youtube} class="text-gray-300 hover:text-white">YouTube</a>
      </div>
    </div>
  </section>

  <!-- Community Identity Section -->
  <section class="py-16 bg-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-white mb-4">About Our Community</h2>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          <strong>Sausfest</strong> is a FFXIV community located on the <strong>Aether Data Center</strong> that helps players progress and clear <strong>Endgame Content!</strong>
        </p>
      </div>
      
      <!-- Stats Grid -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
        <div class="bg-gray-700 rounded-lg p-6 text-center">
          <div class="text-3xl font-bold text-blue-400 mb-2">{stats.totalSignups}</div>
          <div class="text-gray-300">Total Signups</div>
        </div>
        <div class="bg-gray-700 rounded-lg p-6 text-center">
          <div class="text-3xl font-bold text-purple-400 mb-2">{stats.activeEncounters}</div>
          <div class="text-gray-300">Active Encounters</div>
        </div>
        <div class="bg-gray-700 rounded-lg p-6 text-center">
          <div class="text-3xl font-bold text-green-400 mb-2">{stats.squads.length}</div>
          <div class="text-gray-300">Active Squads</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Clear Squads Section -->
  <section class="py-16 bg-gray-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-white mb-4">Clear Squads</h2>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          Teams that aim to provide a safe & efficient prog/clear experience for players in the hosted <strong>Endgame Content</strong>
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        {stats.squads.map((squad) => (
          <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h3 class="text-xl font-bold text-white mb-2">{squad.name}</h3>
            <span class={`inline-block px-3 py-1 rounded-full text-sm font-medium ${
              squad.status === 'active' 
                ? 'bg-green-900 text-green-300' 
                : 'bg-gray-700 text-gray-300'
            }`}>
              {squad.status}
            </span>
          </div>
        ))}
      </div>
      
      <div class="text-center">
        <p class="text-gray-400 italic">(under construction)</p>
      </div>
    </div>
  </section>

  <!-- Qualified Prog-points Section -->
  <section class="py-16 bg-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-white mb-4">Qualified Prog-points</h2>
      </div>
      
      {Object.entries(stats.progRequirements).map(([encounter, requirements]) => (
        <div class="bg-gray-700 rounded-lg p-6 mb-6">
          <h3 class="text-xl font-bold text-blue-400 mb-4">{encounter}</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <h4 class="font-semibold text-white mb-2">Prog Parties:</h4>
              <p class="text-gray-300">{(requirements as any).prog}</p>
            </div>
            <div>
              <h4 class="font-semibold text-white mb-2">Clear-Ready:</h4>
              <p class="text-gray-300">{(requirements as any).clear}</p>
            </div>
          </div>
        </div>
      ))}
    </div>
  </section>

  <!-- Sign-Up Instructions Section -->
  <section class="py-16 bg-gray-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-white mb-4">Sign-Up Instructions</h2>
        <p class="text-gray-300 mb-4">Sign ups are taken thru our Discord!</p>
        <p class="text-sm text-yellow-400 bg-yellow-900/20 rounded-lg p-3 inline-block">
          <strong>Disclaimer:</strong> Your log/screenshot/video proof of prog-point must not be older than <strong>4 weeks</strong> from the day you sign-up.
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-gray-800 rounded-lg p-6 text-center border border-gray-700">
          <div class="text-2xl font-bold text-blue-400 mb-2">1</div>
          <h3 class="font-semibold text-white mb-2">Join Discord</h3>
          <p class="text-gray-300 text-sm">Join the <strong>Sausfest Discord</strong>!</p>
        </div>
        <div class="bg-gray-800 rounded-lg p-6 text-center border border-gray-700">
          <div class="text-2xl font-bold text-blue-400 mb-2">2</div>
          <h3 class="font-semibold text-white mb-2">Get Role</h3>
          <p class="text-gray-300 text-sm">Grab the <strong>@Ulti Project</strong> role</p>
        </div>
        <div class="bg-gray-800 rounded-lg p-6 text-center border border-gray-700">
          <div class="text-2xl font-bold text-blue-400 mb-2">3</div>
          <h3 class="font-semibold text-white mb-2">Verify Character</h3>
          <p class="text-gray-300 text-sm">Verify your character in <strong>#bot-verification</strong></p>
        </div>
        <div class="bg-gray-800 rounded-lg p-6 text-center border border-gray-700">
          <div class="text-2xl font-bold text-blue-400 mb-2">4</div>
          <h3 class="font-semibold text-white mb-2">Sign Up</h3>
          <p class="text-gray-300 text-sm">Sign up in <strong>#project-signups</strong></p>
        </div>
      </div>
      
      <div class="text-center bg-blue-900/20 rounded-lg p-6">
        <p class="text-blue-300 mb-2">
          Once sign-up is approved, a Coordinator with the availability to schedule you will reach out eventually!
        </p>
        <p class="text-yellow-400 font-semibold">
          <strong>REMINDER: Please turn Discord DMs & pings ON</strong>
        </p>
      </div>
    </div>
  </section>

  <!-- Call to Action -->
  <section class="py-16 bg-gradient-to-r from-purple-900 to-blue-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold text-white mb-4">We'll see you soon!</h2>
      <div class="space-y-4">
        <a href="/signups" 
           class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors mr-4">
          View Current Signups
        </a>
        <a href={stats.socialLinks.discord} target="_blank" rel="noopener noreferrer"
           class="inline-block bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors">
          Join Our Discord
        </a>
      </div>
    </div>
  </section>
</Layout> 
